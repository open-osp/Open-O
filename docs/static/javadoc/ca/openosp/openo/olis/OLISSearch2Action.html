<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (21) on Fri Nov 07 11:16:50 EST 2025 -->
<title>OLISSearch2Action (OpenO 0-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-11-07">
<meta name="description" content="declaration: package: ca.openosp.openo.olis, class: OLISSearch2Action">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/OLISSearch2Action.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li><a href="#field-summary">Field</a></li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li><a href="#field-detail">Field</a></li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">ca.openosp.openo.olis</a></div>
<h1 title="Class OLISSearch2Action" class="title">Class OLISSearch2Action</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">com.opensymphony.xwork2.ActionSupport
<div class="inheritance">ca.openosp.openo.olis.OLISSearch2Action</div>
</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code>com.opensymphony.xwork2.Action</code>, <code>com.opensymphony.xwork2.interceptor.ValidationAware</code>, <code>com.opensymphony.xwork2.LocaleProvider</code>, <code>com.opensymphony.xwork2.TextProvider</code>, <code>com.opensymphony.xwork2.Validateable</code>, <code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/Serializable.html" title="class or interface in java.io" class="external-link">Serializable</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">OLISSearch2Action</span>
<span class="extends-implements">extends com.opensymphony.xwork2.ActionSupport</span></div>
<div class="block">Struts 2 action for OLIS (Ontario Laboratory Information System) search queries.
 <p>
 This action handles the construction and submission of various OLIS HL7 query types
 to retrieve laboratory results from the Ontario provincial laboratory system.
 It supports multiple query types with different search criteria and parameters:
 <ul>
 <li>Z01 - Patient-centric lab result query (most common)</li>
 <li>Z02 - Retrieve specific test results by placer group number</li>
 <li>Z04 - Provider-centric query for all patients</li>
 <li>Z05 - Query by destination laboratory</li>
 <li>Z06 - Query by ordering facility</li>
 <li>Z07 - Query by time period only</li>
 <li>Z08 - Query with minimal criteria</li>
 <li>Z50 - Patient demographic search (find patients)</li>
 </ul>
 <p>
 The action processes request parameters to build HL7 query objects with appropriate
 PID, OBR, OBX, PV1, ZRP, ZBR, and other HL7 segments based on the query type.
 <p>
 Key features:
 <ul>
 <li>Query UUID tracking for result correlation</li>
 <li>Consent override logging with OscarLog audit trail</li>
 <li>Patient consent handling (blocked information, consent block all)</li>
 <li>Date range parsing and normalization</li>
 <li>Provider credential mapping from UserProperty</li>
 <li>Demographic data integration from patient records</li>
 <li>Support for quantity-limited queries</li>
 <li>Multiple practitioner role filtering (ordering, attending, admitting, copied-to)</li>
 </ul>
 <p>
 All properties are automatically populated by Struts 2 property injection from
 request parameters before the execute() method is called.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>2006-04-20</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../serialized-form.html#ca.openosp.openo.olis.OLISSearch2Action">Serialized Form</a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/HashMap.html" title="class or interface in java.util" class="external-link">HashMap</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="../olis1/queries/Query.html" title="class in ca.openosp.openo.olis1.queries">Query</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#searchQueryMap" class="member-name-link">searchQueryMap</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-com.opensymphony.xwork2.ActionSupport">Fields inherited from class&nbsp;com.opensymphony.xwork2.ActionSupport</h3>
<code>container</code></div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-com.opensymphony.xwork2.Action">Fields inherited from interface&nbsp;com.opensymphony.xwork2.Action</h3>
<code>ERROR, INPUT, LOGIN, NONE, SUCCESS</code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">OLISSearch2Action</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#execute()" class="member-name-link">execute</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Main execution method for OLIS search query construction and submission.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-com.opensymphony.xwork2.ActionSupport">Methods inherited from class&nbsp;com.opensymphony.xwork2.ActionSupport</h3>
<code>addActionError, addActionMessage, addFieldError, clearActionErrors, clearErrors, clearErrorsAndMessages, clearFieldErrors, clearMessages, clone, getActionErrors, getActionMessages, getContainer, getFieldErrors, getFormatted, getLocale, getLocaleProvider, getText, getText, getText, getText, getText, getText, getText, getText, getText, getTextProvider, getTexts, getTexts, hasActionErrors, hasActionMessages, hasErrors, hasFieldErrors, hasKey, input, isValidLocale, isValidLocaleString, pause, setActionErrors, setActionMessages, setContainer, setFieldErrors, validate</code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="searchQueryMap">
<h3>searchQueryMap</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/HashMap.html" title="class or interface in java.util" class="external-link">HashMap</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="../olis1/queries/Query.html" title="class in ca.openosp.openo.olis1.queries">Query</a>&gt;</span>&nbsp;<span class="element-name">searchQueryMap</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>OLISSearch2Action</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">OLISSearch2Action</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="execute()">
<h3>execute</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">execute</span>()</div>
<div class="block">Main execution method for OLIS search query construction and submission.
 <p>
 This method handles two main workflows:
 <ul>
 <li>Redo existing query - Retrieves a previously constructed query by UUID and resubmits it,
     optionally with consent override if forced</li>
 <li>New query construction - Builds a new HL7 query object based on queryType parameter
     (Z01, Z02, Z04, Z05, Z06, Z07, Z08, Z50) with all relevant search parameters</li>
 </ul>
 <p>
 For new queries, the method:
 <ul>
 <li>Parses and validates all request parameters specific to the query type</li>
 <li>Constructs appropriate HL7 segments (PID, OBR, OBX, PV1, ZRP, ZBR, etc.)</li>
 <li>Integrates demographic and provider data from the database</li>
 <li>Generates a unique UUID for query tracking</li>
 <li>Stores the query in searchQueryMap for potential re-execution</li>
 <li>Logs consent overrides if applicable</li>
 <li>Submits the query via Driver.submitOLISQuery()</li>
 </ul>
 <p>
 Expected request parameters vary by query type but commonly include:
 <ul>
 <li>queryType - String OLIS query type (Z01, Z02, Z04, Z05, Z06, Z07, Z08, Z50)</li>
 <li>redo - String "true" to resubmit existing query by UUID</li>
 <li>uuid - String query UUID for redo operations</li>
 <li>force - String "true" to override consent blocks</li>
 <li>demographic - String demographic number for patient queries</li>
 <li>requestingHic - String provider number for requesting HIC</li>
 <li>startTimePeriod / endTimePeriod - String date range (yyyy-MM-dd)</li>
 <li>quantityLimitedQuery - String "true" to enable quantity limit</li>
 <li>quantityLimit - String number of results to limit</li>
 <li>blockedInformationConsent - String consent code (Y/N/Z for override)</li>
 <li>testRequestCode[] - String array of test request codes (OBR.4)</li>
 <li>testResultCode[] - String array of test result codes (OBX.3)</li>
 <li>orderingPractitioner - String provider number for ordering practitioner</li>
 <li>copiedToPractitioner - String provider number for copied-to practitioner</li>
 <li>attendingPractitioner - String provider number for attending practitioner</li>
 <li>admittingPractitioner - String provider number for admitting practitioner</li>
 <li>performingLaboratory - String laboratory identifier</li>
 <li>reportingLaboratory - String laboratory identifier</li>
 <li>excludePerformingLaboratory - String laboratory identifier to exclude</li>
 <li>excludeReportingLaboratory - String laboratory identifier to exclude</li>
 </ul>
 <p>
 Z50-specific parameters:
 <ul>
 <li>z50firstName - String patient first name</li>
 <li>z50lastName - String patient last name</li>
 <li>z50sex - String patient sex (M/F)</li>
 <li>z50dateOfBirth - String patient date of birth (yyyy-MM-dd)</li>
 </ul></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code>execute</code>&nbsp;in interface&nbsp;<code>com.opensymphony.xwork2.Action</code></dd>
<dt>Overrides:</dt>
<dd><code>execute</code>&nbsp;in class&nbsp;<code>com.opensymphony.xwork2.ActionSupport</code></dd>
<dt>Returns:</dt>
<dd>String "results" to forward to results page</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2018&#x2013;2025. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
